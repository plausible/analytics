# Plausible Analytics Production Environment Configuration
# Copy this file to .env and update the values for your production server

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Your domain or IP address (REQUIRED)
BASE_URL=https://plausible.windifi.com

# Secret key for session encryption (REQUIRED - generate with: openssl rand -base64 64)
SECRET_KEY_BASE=TT1SjQthUlCHXi/stErmPtH/XwG8YF/B4lt/z6q09GRg7hORZRUcyVIrWgrHqOwSmwwZmzF727Di++RpOWM8UA==

# TOTP vault key for 2FA (generate with: openssl rand -base64 32)
TOTP_VAULT_KEY=Q3BD4nddbkVJIPXgHuo5NthGKSIH0yesRfG05J88HIo=

# Environment
ENVIRONMENT=prod

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database URL
DATABASE_URL=postgres://plausible:plausible@postgres:5432/plausible

# ClickHouse Database URL
CLICKHOUSE_DATABASE_URL=http://clickhouse:8123/plausible?user=default&password=

# ClickHouse Configuration
CLICKHOUSE_MAX_BUFFER_SIZE_BYTES=100000
CLICKHOUSE_FLUSH_INTERVAL_MS=5000
CLICKHOUSE_INGEST_POOL_SIZE=5

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server settings
PORT=8000
LISTEN_IP=0.0.0.0
SECURE_COOKIE=true

# Logging
LOG_LEVEL=notice
LOG_FORMAT=standard

# =============================================================================
# USER MANAGEMENT
# =============================================================================

# Admin user IDs (comma-separated)
ADMIN_USER_IDS=1

# Registration settings
DISABLE_REGISTRATION=false

# Email verification
ENABLE_EMAIL_VERIFICATION=false

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# Email adapter (Bamboo.LocalAdapter, Bamboo.SMTPAdapter, Bamboo.PostmarkAdapter, etc.)
MAILER_ADAPTER=Bamboo.LocalAdapter

# SMTP Configuration (if using SMTP)
# SMTP_HOST_ADDR=smtp.gmail.com
# SMTP_HOST_PORT=587
# SMTP_USER_NAME=your-email@gmail.com
# SMTP_USER_PWD=your-app-password
# SMTP_HOST_SSL_ENABLED=true

# =============================================================================
# GEOLOCATION CONFIGURATION
# =============================================================================

# MaxMind License Key (for GeoLite2 database)
# MAXMIND_LICENSE_KEY=your-maxmind-license-key

# Or specify a local geolocation database file
# IP_GEOLOCATION_DB=/etc/plausible/dbip-city.mmdb

# =============================================================================
# MONITORING & ANALYTICS (Optional)
# =============================================================================

# Sentry for error tracking
# SENTRY_DSN=your-sentry-dsn

# Honeycomb for observability
# HONEYCOMB_API_KEY=your-honeycomb-api-key
# HONEYCOMB_DATASET=plausible

# =============================================================================
# INTEGRATIONS (Optional)
# =============================================================================

# Google Analytics Import
# GOOGLE_CLIENT_ID=your-google-client-id
# GOOGLE_CLIENT_SECRET=your-google-client-secret

# Slack notifications
# SLACK_WEBHOOK=your-slack-webhook-url

# hCaptcha for spam protection
# HCAPTCHA_SITEKEY=your-hcaptcha-sitekey
# HCAPTCHA_SECRET=your-hcaptcha-secret

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Self-hosted mode
SELFHOST=true

# Disable cron jobs (set to true if you want to run them manually)
DISABLE_CRON=false

# Session timeout (in minutes)
SESSION_LENGTH_MINUTES=30

# Custom script name (default: script)
CUSTOM_SCRIPT_NAME=script

# Log failed login attempts
LOG_FAILED_LOGIN_ATTEMPTS=false

# =============================================================================
# S3 STORAGE (Optional - for exports/imports)
# =============================================================================

# S3_DISABLED=true
# S3_ACCESS_KEY_ID=your-s3-access-key
# S3_SECRET_ACCESS_KEY=your-s3-secret-key
# S3_REGION=us-east-1
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_EXPORTS_BUCKET=your-exports-bucket
# S3_IMPORTS_BUCKET=your-imports-bucket

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# OpenTelemetry sampler ratio
OTEL_SAMPLER_RATIO=0.1

# Import buffer size
IMPORTED_MAX_BUFFER_SIZE=10000

# =============================================================================
# SECURITY
# =============================================================================

# Enable session transfer (for load balancing)
ENABLE_SESSION_TRANSFER=true

# WebSocket URL (for real-time features)
# WEBSOCKET_URL=wss://plausible.windifi.com 